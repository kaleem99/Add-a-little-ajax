<link rel="stylesheet" type="text/css" href="css/style.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<main id="site-main">
  <div class="container">
    <div class="box-nav d-flex justify-between">
      <div class="filter">
        <a href="<%= link.slice(link.indexOf('/')) %>"
          ><i class="fas fa-angle-double-left"></i> <h1>All Users</h1></a
        >
      </div>
    </div>
    <div class="form-title text-center">
      <h2 class="text-dark">Update User</h2>
      <h3 class="text-light">Use the below form to Update an account</h3>
    </div>

    <!-- add user form -->
    <!-- form handling -->
    <form method="POST" id="updateUser">
      <div class="newUser">
        <div class="form-group">
          <label for="name" class="text-light">Name</label>
          <input type="hidden" name="id" value="<%= user[0].id %>" />
          <input
            type="text"
            name="name"
            value="<%= user[0].name %>"
            placeholder="Mark Stoenis"
          />
        </div>
        <div class="form-group">
          <label for="assisted" class="text-light">Assisted By</label>
          <input
            type="text"
            name="assisted"
            value="<%= user[0].assistedby %>"
            placeholder="Shawn Jacobson"
          />
        </div>
        <div class="form-group">
          <label for="age" class="text-light">Age</label>
          <input
            type="number"
            name="age"
            value="<%= user[0].age %>"
            placeholder="Shawn Jacobson"
          />
        </div>
        <div class="form-group">
          <label for="date" class="text-light">Date Of Visit</label>
          <input
            type="date"
            name="date"
            value="<%= user[0].dateofvisit.toISOString().slice(0, 10) %>"
            placeholder="Shawn Jacobson"
          />
        </div>
        <div class="form-group">
          <label for="time" class="text-light">Time Of Visit</label>
          <input
            type="time"
            name="time"
            value="<%= user[0].timeofvisit %>"
            placeholder="Shawn Jacobson"
          />
        </div>
        <div class="form-group">
          <label for="comments" class="text-light">Comments</label>
          <input
            type="text"
            name="comments"
            value="<%= user[0].comments %>"
            placeholder="Shawn Jacobson"
          />
        </div>
        <div class="form-group2">
          <button type="submit" class="btn text-dark update">Save</button>
        </div>
      </div>
    </form>
  </div>
</main>
<script>
  $("#updateUser").submit(function (event) {
    let id = "<%= userID %>";
    const request = {
      url: `http://<%= link %>${id}`,
      method: "POST",
    };

    $.ajax(request).done(function (response) {
      alert("User Updated Successfully!");
    });
  });
</script>
